<!DOCTYPE html>
<html lang="zh"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>接口限流</title>
    <meta charset="utf-8">
    <meta name="description" content="Ladder@简单介绍令牌桶算法和golang官方的接口限流库">
    <meta name="author" content="印象简单/EasyImpr">
    <link rel="canonical" href="http://localhost:1313/code/%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/">

    <link rel="alternate" type="application/rss+xml" href="http://localhost:1313//index.xml" title="印象简单的博客">

    


    <meta property="og:url" content="http://localhost:1313/code/%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/">
  <meta property="og:site_name" content="印象简单的博客">
  <meta property="og:title" content="接口限流">
  <meta property="og:description" content="简单介绍令牌桶算法和golang官方的接口限流库">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="code">
    <meta property="article:published_time" content="2026-01-18T01:15:47+08:00">
    <meta property="article:modified_time" content="2026-01-18T01:15:47+08:00">
    <meta property="article:tag" content="Golang">
      <meta property="og:see_also" content="http://localhost:1313/code/kitex/">
      <meta property="og:see_also" content="http://localhost:1313/code/grpc/">
      <meta property="og:see_also" content="http://localhost:1313/code/mongo/">
      <meta property="og:see_also" content="http://localhost:1313/agent/loopagent%E5%BE%AA%E7%8E%AF%E4%BC%98%E5%8C%96%E4%BB%A3%E7%A0%81/">
      <meta property="og:see_also" content="http://localhost:1313/agent/%E6%B5%81%E7%A8%8B%E7%9A%84%E4%B8%AD%E6%96%AD%E4%B8%8E%E5%9B%9E%E5%A4%8D/">
      <meta property="og:see_also" content="http://localhost:1313/agent/%E9%80%9A%E8%BF%87adk%E8%B0%83%E7%94%A8ai_agent%E4%BB%A5%E5%8F%8A%E5%8E%86%E5%8F%B2%E6%B6%88%E6%81%AF%E7%9A%84%E4%BF%9D%E5%AD%98/">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="接口限流">
  <meta name="twitter:description" content="简单介绍令牌桶算法和golang官方的接口限流库">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Codes",
      "item": "http://localhost:1313/code/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "接口限流",
      "item": "http://localhost:1313/code/%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "接口限流",
  "name": "接口限流",
  "description": "简单介绍令牌桶算法和golang官方的接口限流库\n",
  "keywords": [
    "golang"
  ],
  "articleBody": "简单介绍令牌桶算法和golang官方的接口限流库\n接口限流 令牌桶算法 r:每秒钟向通内放入r个令牌，即每隔1/r秒放一个令牌\nb:桶的最大容量是b，桶满后试图再放入的令牌将会丢弃掉\n当有人请求n个令牌的时候，如果桶中的令牌数小于n则请求方阻塞或者直接放弃，否则直接取走n个令牌\n例子 假如r=10，b=5\n那么每隔0.1秒产生一个令牌，则0.5秒桶就满了，之后生成就装不下去了，加入再0.7秒到0.8秒之间，有5个人想请求1个令牌，全部都可以顺利取走\n那么加入0.9秒一直在生产令牌，那么还是只有5个令牌，0.9秒到1秒取走一个，那么1秒内就有处理了一个请求\n场景 秒杀场景:如果有10个商品，那么就可以设置令牌的初始为10，谁手快就把令牌抢走了，如果谁不付款，就把令牌归还，谁再去抢\n限制qps\ngolang官方的限流器 golang.org/x/time/rate 是 Go 官方提供的令牌桶算法限流器实现，被广泛应用于 Kubernetes 等大型开源项目中。\n核心概念 Limit: 事件发生的最大频率（每秒事件数），类型为 float64 Limiter: 限流器核心结构，控制事件频率 b (burst): 令牌桶的最大容量，允许突发流量 快速使用 import \"golang.org/x/time/rate\" // 创建一个限流器: 每秒10个请求，突发容量100 limiter := rate.NewLimiter(rate.Limit(10), 100) 核心方法 1. Allow / AllowN - 非阻塞检查 // 检查是否允许当前请求通过（不阻塞） if limiter.Allow() { // 处理请求 } // 检查是否允许n个请求通过 if limiter.AllowN(time.Now(), 5) { // 处理5个请求 } Allow 返回 true 表示有足够令牌，调用方可继续执行；返回 false 表示被限流。\n2. Reserve / ReserveN - 预约令牌 // 预约一个令牌用于未来使用 r := limiter.Reserve() if !r.OK() { // 无法获取令牌 } // 等待delay后使用令牌 time.Sleep(r.Delay()) // 执行操作... // 可以取消预约 r.Cancel() 适用于需要预知等待时间并做出决策的场景。\n3. Wait / WaitN - 阻塞等待（推荐） // 等待获取1个令牌（阻塞，直到获取到或上下文取消） err := limiter.Wait(ctx) // 等待获取n个令牌 err := limiter.WaitN(ctx, 5) 这是最常用的方法，会阻塞直到获取到所需令牌或上下文超时。\n动态调整限流 // 动态调整速率（从当前时间开始） limiter.SetLimit(rate.Limit(20)) // 动态调整桶容量 limiter.SetBurst(200) // 在指定时间点调整 limiter.SetLimitAt(time.Now(), rate.Limit(15)) limiter.SetBurstAt(time.Now(), 100) 获取限流器状态 // 获取当前速率限制 fmt.Println(\"Rate:\", limiter.Limit()) // 如: 10 // 获取当前突发容量 fmt.Println(\"Burst:\", limiter.Burst()) // 如: 100 // 获取当前可用令牌数 fmt.Println(\"Tokens:\", limiter.Tokens()) ",
  "wordCount" : "145",
  "inLanguage": "zh",
  "datePublished": "2026-01-18T01:15:47+08:00",
  "dateModified": "2026-01-18T01:15:47+08:00",
  "author":{
    "@type": "Person",
    "name": "印象简单/EasyImpr"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/code/%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "印象简单的博客",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
    <link rel="icon" href="/images/%e5%be%ae%e4%bf%a1%e5%9b%be%e7%89%87_2025-11-23_104342_537.jpg" sizes="16x16">

<link rel="apple-touch-icon" href="/images/%e5%be%ae%e4%bf%a1%e5%9b%be%e7%89%87_2025-11-23_104342_537.jpg">

<link rel="manifest" href="/images/%e5%be%ae%e4%bf%a1%e5%9b%be%e7%89%87_2025-11-23_104342_537.jpg">
    

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/style.css" />

    
    
    <link rel="stylesheet" href="/css/main.min.ec28f09e946fc0df77c187fcd0d0ebde58fca6de8efb8e1620f3d45c32d4da88.css" integrity="sha256-7CjwnpRvwN93wYf80NDr3lj8pt6O&#43;44WIPPUXDLU2og=" crossorigin="anonymous" media="screen" />

    
    <link rel="stylesheet" href="/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css" />

    
    <script src="/js/highlight.min.min.65a3017a8aabe1f9330e70527075c8d51bc9634d5cac35077af03588c1df8078.js"></script>
    <script>hljs.highlightAll();</script>

    <script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script>
    </head>
<body>
      <main class="wrapper"><nav class="navigation">
    <section class="container">
        <a class="navigation-brand" href="/">
            主页
        </a>
        <input type="checkbox" id="menu-toggle" />
        <label class="menu-button float-right" for="menu-toggle">
            <span></span><span></span><span></span>
        </label>
        
        <ul class="navigation-list" id="navigation-list">
            
            
            <li class="navigation-item navigation-menu">
                <a class="navigation-link" href="/code/">开发</a>
            </li>
            
            <li class="navigation-item navigation-menu">
                <a class="navigation-link" href="/agent/">Agent</a>
            </li>
            
            <li class="navigation-item navigation-menu">
                <a class="navigation-link" href="/life/">生活</a>
            </li>
            
            <li class="navigation-item navigation-menu">
                <a class="navigation-link" href="/friend/">友情链接</a>
            </li>
            
            <li class="navigation-item navigation-menu">
                <a class="navigation-link" href="/guestbook/">留言板</a>
            </li>
            
            

            <li class="navigation-item menu-separator">
                <span>|</span>
            </li>

            
            
            <li class="navigation-item navigation-social">
                <a class="navigation-link" href="https://github.com/yinxiangpingfan"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a>
            </li>
            
            <li class="navigation-item navigation-social">
                <a class="navigation-link" href="mailto:ecygbsj@163.com"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a>
            </li>
            
            

            <li class="navigation-item navigation-dark">
                <button id="mode" type="button" aria-label="toggle user light or dark theme">
                    <span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span>
                    <span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
                </button>
            </li>

            
            
        </ul>
        
    </section>
</nav>
<div id="content">
<article class="blog-single">
  <header class="blog-title">
    <h1>接口限流</h1>
  </header>

  <p>
  <small>
    2026年1月18日&nbsp;· 145 字&nbsp;· 1 分钟</small>

  
<p>

  <div class="blog-toc">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#令牌桶算法">令牌桶算法</a></li>
    <li><a href="#例子">例子</a></li>
    <li><a href="#场景">场景</a></li>
    <li><a href="#golang官方的限流器">golang官方的限流器</a>
      <ul>
        <li><a href="#核心概念">核心概念</a></li>
        <li><a href="#快速使用">快速使用</a></li>
        <li><a href="#核心方法">核心方法</a></li>
        <li><a href="#动态调整限流">动态调整限流</a></li>
        <li><a href="#获取限流器状态">获取限流器状态</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>

  <section class="blog-content"><p>简单介绍令牌桶算法和golang官方的接口限流库</p>
<h1 id="接口限流">接口限流</h1>
<h2 id="令牌桶算法">令牌桶算法</h2>
<p>r:每秒钟向通内放入r个令牌，即每隔1/r秒放一个令牌</p>
<p>b:桶的最大容量是b，桶满后试图再放入的令牌将会丢弃掉</p>
<p>当有人请求n个令牌的时候，如果桶中的令牌数小于n则请求方阻塞或者直接放弃，否则直接取走n个令牌</p>
<h2 id="例子">例子</h2>
<p>假如r=10，b=5</p>
<p>那么每隔0.1秒产生一个令牌，则0.5秒桶就满了，之后生成就装不下去了，加入再0.7秒到0.8秒之间，有5个人想请求1个令牌，全部都可以顺利取走</p>
<p>那么加入0.9秒一直在生产令牌，那么还是只有5个令牌，0.9秒到1秒取走一个，那么1秒内就有处理了一个请求</p>
<h2 id="场景">场景</h2>
<p>秒杀场景:如果有10个商品，那么就可以设置令牌的初始为10，谁手快就把令牌抢走了，如果谁不付款，就把令牌归还，谁再去抢</p>
<p>限制qps</p>
<h2 id="golang官方的限流器">golang官方的限流器</h2>
<p><code>golang.org/x/time/rate</code> 是 Go 官方提供的令牌桶算法限流器实现，被广泛应用于 Kubernetes 等大型开源项目中。</p>
<h3 id="核心概念">核心概念</h3>
<ul>
<li><strong>Limit</strong>: 事件发生的最大频率（每秒事件数），类型为 <code>float64</code></li>
<li><strong>Limiter</strong>: 限流器核心结构，控制事件频率</li>
<li><strong>b (burst)</strong>: 令牌桶的最大容量，允许突发流量</li>
</ul>
<h3 id="快速使用">快速使用</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;golang.org/x/time/rate&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 创建一个限流器: 每秒10个请求，突发容量100</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">limiter</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">rate</span>.<span style="color:#a6e22e">NewLimiter</span>(<span style="color:#a6e22e">rate</span>.<span style="color:#a6e22e">Limit</span>(<span style="color:#ae81ff">10</span>), <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h3 id="核心方法">核心方法</h3>
<h4 id="1-allow--allown---非阻塞检查">1. Allow / AllowN - 非阻塞检查</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// 检查是否允许当前请求通过（不阻塞）</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">Allow</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 处理请求</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 检查是否允许n个请求通过</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">AllowN</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>(), <span style="color:#ae81ff">5</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 处理5个请求</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>Allow</code> 返回 <code>true</code> 表示有足够令牌，调用方可继续执行；返回 <code>false</code> 表示被限流。</p>
<h4 id="2-reserve--reserven---预约令牌">2. Reserve / ReserveN - 预约令牌</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// 预约一个令牌用于未来使用</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">r</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">Reserve</span>()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">OK</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 无法获取令牌</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 等待delay后使用令牌</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">Delay</span>())
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 执行操作...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 可以取消预约</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">Cancel</span>()
</span></span></code></pre></div><p>适用于需要预知等待时间并做出决策的场景。</p>
<h4 id="3-wait--waitn---阻塞等待推荐">3. Wait / WaitN - 阻塞等待（推荐）</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// 等待获取1个令牌（阻塞，直到获取到或上下文取消）</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">Wait</span>(<span style="color:#a6e22e">ctx</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 等待获取n个令牌</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">WaitN</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#ae81ff">5</span>)
</span></span></code></pre></div><p>这是最常用的方法，会阻塞直到获取到所需令牌或上下文超时。</p>
<h3 id="动态调整限流">动态调整限流</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// 动态调整速率（从当前时间开始）</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">SetLimit</span>(<span style="color:#a6e22e">rate</span>.<span style="color:#a6e22e">Limit</span>(<span style="color:#ae81ff">20</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 动态调整桶容量</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">SetBurst</span>(<span style="color:#ae81ff">200</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 在指定时间点调整</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">SetLimitAt</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>(), <span style="color:#a6e22e">rate</span>.<span style="color:#a6e22e">Limit</span>(<span style="color:#ae81ff">15</span>))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">SetBurstAt</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>(), <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h3 id="获取限流器状态">获取限流器状态</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// 获取当前速率限制</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Rate:&#34;</span>, <span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">Limit</span>())   <span style="color:#75715e">// 如: 10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 获取当前突发容量</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Burst:&#34;</span>, <span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">Burst</span>())  <span style="color:#75715e">// 如: 100</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 获取当前可用令牌数</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Tokens:&#34;</span>, <span style="color:#a6e22e">limiter</span>.<span style="color:#a6e22e">Tokens</span>())
</span></span></code></pre></div></section>

  
  

  

<div class="related-resources">
  
    
    
    
  
</div>


  
  
<div class="comments">
  <script>
      const getTheme = window.localStorage && window.localStorage.getItem("theme");
      let theme = getTheme === 'dark' ? 'dark' : 'light';
      let s = document.createElement('script');
      s.src = 'https://giscus.app/client.js';
      s.setAttribute('data-repo', 'yinxiangpingfan\/yinxiangpingfan.github.io');
      s.setAttribute('data-repo-id', 'R_kgDOQ3n2PQ');
      s.setAttribute('data-category', 'Announcements');
      s.setAttribute('data-category-id', 'DIC_kwDOQ3n2Pc4C0-Rs');
      s.setAttribute('data-mapping', 'pathname');
      s.setAttribute('data-strict', '0');
      s.setAttribute('data-reactions-enabled', '1');
      s.setAttribute('data-emit-metadata', '0');
      s.setAttribute('data-input-position', 'top');
      s.setAttribute('data-theme', theme);
      s.setAttribute('data-lang', 'zh-CN');
      s.setAttribute('data-loading', 'lazy');
      s.setAttribute('crossorigin', 'anonymous');
      s.setAttribute('async', '');
      document.querySelector('div.comments').innerHTML = '';
      document.querySelector('div.comments').appendChild(s);
  </script>
</div>

</article>

        </div><footer class="footer">
  <p>&copy; 2026 <a href="http://localhost:1313/">印象简单的博客</a>
    Powered by
    <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>
    <a href="https://github.com/guangzhengli/hugo-theme-ladder" rel="noopener" target="_blank">Ladder</a>
️  </p>
</footer>

<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211C22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257M21.7387 7.71865C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257C17.1684 -1.24629 7.83127 0.632493 4.27577 5.04257C2.88063 6.77451 -0.0433281 11.1668 1.38159 16.6571C2.27481 20.0988 5.17269 22.2936 8.19743 22.7725M20.7188 5.04257C22.0697 6.9404 24.0299 11.3848 22.3541 15.4153M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814C11.1703 6.98257 11.0247 6.98456 10.9937 7.05061C10.5221 8.05496 9.07362 9.92941 8 10.945M11.0333 7.44444C10.9392 9.86549 11 15 12 17" stroke="currentColor" stroke-linecap="round"/>
    </svg>
</a>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>

<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'Copy';

        function copyingDone() {
            copybutton.innerHTML = 'Copied';
            setTimeout(() => {
                copybutton.innerHTML = 'Copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });
        codeblock.parentNode.appendChild(copybutton);
    });
</script></main>
    </body><script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
      const images = Array.from(document.querySelectorAll(".blog-content img"));
      images.forEach(img => {
          mediumZoom(img, {
              margin: 10,  
              scrollOffset: 40,  
              container: null,  
              template: null,  
              background: 'rgba(0, 0, 0, 0.5)'
          });
      });
  </script>

  
  <script src="/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js" integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin="anonymous" defer></script></html>
